<div class="col-sm-12 py-2 px-1">
    <form [formGroup] = "productForm" (ngSubmit) = "onSubmit(productForm.value, $event)">
        <div class="form-group">
            <label for="productName">Products Name</label>
            <input type="text" class="form-control" id="productName" placeholder="eg. Cream" formControlName="productName" required>
        </div>
        <div class="form-group">
            <label for="productCategory">Select Product Category</label>
            <select class="form-control" id="productCategory" [compareWith]="compareFn" formControlName="productCategory">
                <option *ngFor="let category of productCatgories" [ngValue]="category">
                    {{ category.name }}
                </option>
            </select>
        </div>
        <div class="form-row">
            <div class="form-group col-md-5">
              <label for="productPrice">Product Price</label>
              <input type="number" class="form-control" id="productPrice" placeholder="eg. 5,000" formControlName="productPrice" required>
            </div>
            <div class="form-group col-md-5">
              <label for="productPromoPrice">Promo Price</label>
              <input type="number" class="form-control" id="productPromoPrice" placeholder="if no promo price, enter the product price" formControlName="productPromoPrice" required>
            </div>
            <div class="form-group col-md-2 d-flex flex-wrap">
                <p class="mb-2">Discount:</p>
                <p class="text-success w-100 form-control border-0">
                    {{ (productForm.value['productPrice'] -  productForm.value['productPromoPrice'])/productForm.value['productPrice'] | percent }}
                </p>
            </div>
        </div>
        <div class="form-group">
            <label for="productDescription">Product Description</label>
            <textarea class="form-control" id="productDescription" placeholder="Product Description" formControlName="productDescription" required></textarea>
        </div>
        <div class="form-group">
            <label for="productExcerpt">Product Excerpt</label>
            <input type="text" class="form-control" id="productExcerpt" placeholder="" maxlength="75" formControlName="productExcerpt" required>
        </div>
        <div class="form-group">
            <label for="productQuantity">Product Quantity</label>
            <input type="number" min="0" class="form-control" id="productQuantity" placeholder="eg. 10" formControlName="productQuantity" required>
        </div>
        <div class="form-group" formArrayName="productTags">
            <label class="col-sm-12 p-0">Select the appropriate tags</label>
            <div class="col-sm-12 p-0 d-flex flex-wrap" *ngIf="theProductTags.length">
                <label class="col-sm-4 text-capitalize" *ngFor="let tag of theProductTags, let i = index">
                    <input type="checkbox" [value] = "tag.name" (change)="onTagCheck($event)" [checked] = "inTagArray(tag.name)"> 
                    {{ tag.name }}
                </label>
            </div>
            <span *ngIf="!theProductTags.length">
                No tags? <a [routerLink] = "['/tag/add']">Click Here to create tags</a> before creating products.
            </span>
        </div>
        <div class="form-group"  *ngIf="showInputFile">
            <label for="productImg">Choose Product Image</label>
            <input type="file" (change)="onFileChange($event)" class="form-control-file" id="productImg" accept=".jpg, .jpeg, .png" required>
        </div>
        <div *ngIf="!!productForm.get('productImg').value">
            <p>Image Preview</p>
            <img id="imgPreview" src="" alt="Product image preview" >
            <button type="button" *ngIf="!showInputFile" class="btn btn-danger mx-2" (click)="removeImg()" title="Remove current image">
                <i class="far fa-trash-alt"></i>
              </button>
        </div>
        <div class="d-flex flex-wrap">
            <hr class="col-sm-12">
            <button *ngIf="isCreate" type="submit" class="btn btn-success my-3" [disabled]="productForm.invalid || productForm.pristine">
                Create Product
            </button>
            <button *ngIf="!isCreate" type="submit" class="btn btn-success my-3" [disabled]="productForm.invalid">
              Update Product
          </button>
        </div>
    </form>
    <!-- <p>
        Form Value: {{ productForm.value | json }}
    </p> -->
</div>